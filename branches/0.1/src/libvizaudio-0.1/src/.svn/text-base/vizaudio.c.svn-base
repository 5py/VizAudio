#include <vizaudio.h>
#include <gtk/gtk.h>

void vizaudio_display(int id) {

    switch(id) {
    case 1:;
        GtkWidget *window;
        
        window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
        gtk_widget_show  (window);

        break;

    case 2:;
            /* Create a temporary, decorationless window */
        GtkWidget* tempFlashWindow;
        tempFlashWindow = gtk_window_new(GTK_WINDOW_TOPLEVEL);
        gtk_window_set_decorated(GTK_WINDOW(tempFlashWindow), FALSE);
        gtk_window_set_position(GTK_WINDOW(tempFlashWindow), GTK_WIN_POS_CENTER);
        
        GtkWidget* image;
        image = gtk_image_new_from_file("seaslug.jpg");
        gtk_container_add (GTK_CONTAINER (tempFlashWindow), image);
        
        gtk_widget_show(image);    
        gtk_widget_show(tempFlashWindow);        
        
        /* This function takes the function endFlash and calls it every
         * 1 second. When endFlash returns false, this loop ends.
         * This serves to make the screen flash last only one second. */
        g_timeout_add(250, (GSourceFunc)endFlash, (gpointer)tempFlashWindow);
        break;

    case 3:;
        /* Create a temporary, decorationless window */
        GtkWidget* tempFlashWindow2;
        tempFlashWindow2 = gtk_window_new(GTK_WINDOW_TOPLEVEL);
        gtk_window_set_decorated(GTK_WINDOW(tempFlashWindow2), FALSE);
        gtk_window_fullscreen(GTK_WINDOW(tempFlashWindow2));
        
        /* Modify the color of the window */
        GdkColor color2;
        gdk_color_parse("light blue", &color2);
        gtk_widget_modify_bg(tempFlashWindow2, GTK_STATE_NORMAL, &color2);
        
        
        gtk_widget_show(tempFlashWindow2);
        
        /* This function takes the function endFlash and calls it every
         * 1 second. When endFlash returns false, this loop ends.
         * This serves to make the screen flash last only one second. */
        g_timeout_add(250, (GSourceFunc)endFlash, (gpointer)tempFlashWindow2);
        break;

    default:
        printf("Flashing the screen\n");
        //display_flash();
        break;
    }
}

static gboolean endFlash(GtkWidget *window){
    gtk_object_destroy(GTK_OBJECT(window));
    return FALSE;
}
